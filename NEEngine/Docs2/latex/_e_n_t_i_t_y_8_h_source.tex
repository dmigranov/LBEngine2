\hypertarget{_e_n_t_i_t_y_8_h_source}{}\doxysection{ENTITY.\+H}
\label{_e_n_t_i_t_y_8_h_source}\index{inc/ENTITY.H@{inc/ENTITY.H}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <list>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <typeindex>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <boost/dynamic\_bitset.hpp>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}ComponentTypeManager.h"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}Component.h"{}}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{class }\mbox{\hyperlink{class_game}{Game}};}
\DoxyCodeLine{13 \textcolor{keyword}{class }\mbox{\hyperlink{class_transform_component}{TransformComponent}};}
\DoxyCodeLine{14 \textcolor{keyword}{class }\mbox{\hyperlink{class_mesh_component}{MeshComponent}};}
\DoxyCodeLine{15 }
\DoxyCodeLine{20 \textcolor{keyword}{class }\mbox{\hyperlink{class_entity}{Entity}}}
\DoxyCodeLine{21 \{}
\DoxyCodeLine{22 \textcolor{keyword}{public}:}
\DoxyCodeLine{23     \mbox{\hyperlink{class_entity}{Entity}}(\textcolor{keywordtype}{bool} isVisible = \textcolor{keyword}{true}, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name = \textcolor{keyword}{nullptr});}
\DoxyCodeLine{24     \mbox{\hyperlink{class_entity}{\string~Entity}}();}
\DoxyCodeLine{25 }
\DoxyCodeLine{26     \textcolor{keywordtype}{void} Initialize();}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \textcolor{comment}{//void SetMesh(MeshComponent* pMesh);}}
\DoxyCodeLine{29     \textcolor{comment}{//void SetTransform(TransformComponent* pTransform);}}
\DoxyCodeLine{30     \textcolor{comment}{//TransformComponent* const GetTransform();}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \textcolor{keywordtype}{void} Render();}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keywordtype}{void} SetVisible(\textcolor{keywordtype}{bool} isVisible);}
\DoxyCodeLine{35     \textcolor{keywordtype}{bool} IsVisible() \textcolor{keyword}{const};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     std::string GetName() \textcolor{keyword}{const};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{comment}{//void AddComponent(const ComponentType type, Component* pComponent);   //old}}
\DoxyCodeLine{40     }
\DoxyCodeLine{41     \textcolor{comment}{//было Component*, сделал T*}}
\DoxyCodeLine{42     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \textcolor{keywordtype}{void} AddComponent(T* pComponent)       \textcolor{comment}{//new }}
\DoxyCodeLine{43     \{}
\DoxyCodeLine{44         \textcolor{keyword}{auto} manager = Game::GetInstance().GetComponentTypeManager();}
\DoxyCodeLine{45         \textcolor{keyword}{auto} componentIndex = manager-\/>template GetComponentTypeIndex<T>();}
\DoxyCodeLine{46         m\_components[componentIndex] = pComponent;}
\DoxyCodeLine{47         pComponent-\/>Initialize(\textcolor{keyword}{this});}
\DoxyCodeLine{48 }
\DoxyCodeLine{49         boost::dynamic\_bitset<> add(manager-\/>GetComponentTypesCount());}
\DoxyCodeLine{50         add[componentIndex] = 1;}
\DoxyCodeLine{51         m\_componentsMask |= add;}
\DoxyCodeLine{52     \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{comment}{//Component* GetComponent(ComponentType type);  //old}}
\DoxyCodeLine{55     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> T* GetComponent() \textcolor{keyword}{const}    \textcolor{comment}{//new; const -\/ can't modify the object it's invoked on}}
\DoxyCodeLine{56     \{}
\DoxyCodeLine{57         \textcolor{keyword}{auto} index = Game::GetInstance().GetComponentTypeManager()-\/>template GetComponentTypeIndex<T>(); \textcolor{comment}{//if such a type isn't registered, will return default value -\/ 0}}
\DoxyCodeLine{58         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}T*\textcolor{keyword}{>}(m\_components[index]); \textcolor{comment}{//if doesn't exist, than zero (considering that not out of bounds)}}
\DoxyCodeLine{59     \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keyword}{const} boost::dynamic\_bitset<>\& GetComponentsMask();}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{private}:}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{comment}{//EffectComponent* m\_pEffect; //todo}}
\DoxyCodeLine{66     \mbox{\hyperlink{class_mesh_component}{MeshComponent}}* m\_pMesh = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{67     \mbox{\hyperlink{class_transform_component}{TransformComponent}}* m\_pTransform = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{68     \textcolor{comment}{//std::map<ComponentType, Component*> m\_components; }}
\DoxyCodeLine{69     std::vector<Component*> m\_components;}
\DoxyCodeLine{70 }
\DoxyCodeLine{71     \textcolor{keywordtype}{bool} m\_isActive;}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{keywordtype}{bool} m\_isVisible;}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     std::string m\_name;}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{//std::bitset<COMPONENT\_TYPE\_COUNT> m\_componentsMask;}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     boost::dynamic\_bitset<> m\_componentsMask;}
\DoxyCodeLine{80 \};}
\DoxyCodeLine{81 }

\end{DoxyCode}
